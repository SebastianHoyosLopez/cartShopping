(this.webpackJsonpshopping_cart=this.webpackJsonpshopping_cart||[]).push([[0],{65:function(t,e,a){},66:function(t,e,a){},89:function(t,e,a){"use strict";a.r(e);var c=a(1),n=a.n(c),r=(a(56),a(57),a(6)),s=a(20),i=a(49),o=a(23),l=a(9),d="ADD_TO_CART",j="LOAD_CART",u="PRODUCT_DELETE",b="USER_SUCCESS",O="LOGOUT",p=[],h=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d:if(t=localStorage.getItem("cart"),t){t=JSON.parse(t);var c=t.find((function(t){return t.id===a.payload.id}));t=c?t.map((function(t){return t.id===a.payload.id?Object(l.a)(Object(l.a)({},t),{},{quantity:t.quantity+1,total:parseInt(t.total)+parseInt(a.payload.price)}):t})):[].concat(Object(o.a)(t),[Object(l.a)(Object(l.a)({},a.payload),{},{quantity:1,total:a.payload.price})])}else t=[Object(l.a)(Object(l.a)({},a.payload),{},{quantity:1,total:a.payload.price})];return localStorage.setItem("cart",JSON.stringify(t)),Object(o.a)(t);case j:return t=localStorage.getItem("cart"),t?(t=JSON.parse(t),Object(o.a)(t)):Object(o.a)(e);case u:return t=localStorage.getItem("cart"),t&&(t=JSON.parse(t),t=t.map((function(t){return t.id===a.payload.id&&t.quantity>1?Object(l.a)(Object(l.a)({},t),{},{quantity:t.quantity-1,total:parseInt(t.total)-parseInt(t.price)}):t}))),1===a.payload.quantity&&(t=t.filter((function(t){return t.id!==a.payload.id}))),localStorage.setItem("cart",JSON.stringify(t)),Object(o.a)(t);default:return Object(o.a)(e)}},m={loading:!1,activo:!1},x=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case b:return t=Object(l.a)(Object(l.a)({},e),{},{activo:!0,userData:{userName:a.payload.displayName,image:a.payload.photoURL,email:a.payload.email,id:a.payload.uid}}),Object(l.a)({},t);case O:return m;default:return Object(l.a)({},e)}},f=Object(s.c)({cart:h,user:x}),g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,v=Object(s.e)(f,g(Object(s.a)(i.a))),y=a(30),N=a.n(y),S=(a(65),a(54)),C=a(21),I=a(7),w=a(18),k=(a(66),a(25)),D=a.n(k),E=a(32),_=a(22);a(68),a(91),a(90);_.a.initializeApp({apiKey:"AIzaSyBx7ETymOmjvyZ-VcOGizriPcU6G0MpJJ8",authDomain:"redux-login-b7c48.firebaseapp.com",projectId:"redux-login-b7c48",storageBucket:"redux-login-b7c48.appspot.com",messagingSenderId:"170656976103",appId:"1:170656976103:web:b33ef37ef45c4aee6da642"});_.a.auth(),_.a.firestore(),_.a.storage();var P=new _.a.auth.GoogleAuthProvider,R=function(t,e,a,c){return{type:b,payload:{uid:t,displayName:e,photoURL:a,email:c}}},T=a(2),q=function(){var t=Object(r.b)(),e=Object(r.c)((function(t){return t.cart.length})),a=Object(r.c)((function(t){return t.user.activo})),c=Object(r.c)((function(t){return t.user.userData}));return Object(T.jsxs)("div",{className:"navbar navbar-dark bg-dark sticky-top",children:[a?Object(T.jsx)(w.b,{to:"/",className:"navbar-brand mx-4",children:c.userName}):Object(T.jsx)(w.b,{to:"/",className:"navbar-brand mx-4",children:"Redux Challenge"}),Object(T.jsx)("div",{className:"d-flex flex-row-reverse",children:a?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("button",{onClick:function(){t(function(){var t=Object(E.a)(D.a.mark((function t(e){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.auth().signOut();case 2:e({type:O});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},className:"btn btn-dark",children:"Cerrar Sesi\xf3n"}),Object(T.jsx)(w.c,{className:"btn btn-dark mr-2",to:"/",exact:!0,children:"Perfil"}),Object(T.jsx)(w.c,{className:"btn btn-dark mr-2",to:"/products",exact:!0,children:"Products"}),Object(T.jsxs)(w.c,{to:"/cart",exact:!0,children:[Object(T.jsx)("img",{id:"image",src:"https://imgbox.es/images/2021/03/16/carrito20dbc749abd24d18.th.png",alt:"cart",style:{height:"40px"}}),Object(T.jsx)("h4",{id:"quantyfi",children:e>=1&&e})]})]}):Object(T.jsx)(w.c,{className:"btn btn-dark mr-2",to:"/login",exact:!0,children:"Login"})})]})},A=a(51),U=a.n(A),J=a(53),L=function(){var t=Object(c.useState)([]),e=Object(C.a)(t,2),a=e[0],n=e[1],s=Object(c.useState)(1),i=Object(C.a)(s,2),o=i[0],l=i[1],j=Object(c.useState)(""),u=Object(C.a)(j,2),b=u[0],O=u[1],p=Object(c.useState)({}),h=Object(C.a)(p,2),m=h[0],x=h[1],f=Object(r.c)((function(t){return t.cart}));Object(c.useEffect)((function(){var t=!0;t&&function(){var t=Object(E.a)(D.a.mark((function t(){var e,a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.get("https://dev2.th3insid3.com/api/products?page=".concat(o,"&search=").concat(b));case 2:e=t.sent,a=e.data.products,n(a),x(e.data.paginatorInfo);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()();t=!1}),[o,b]);var g=Object(r.b)();return Object(T.jsxs)("div",{className:"container text-center",children:[Object(T.jsx)("h1",{children:"Products"}),f.length>=1&&Object(T.jsxs)("h3",{className:"mt-2",children:["products in cart ",f.length]}),Object(T.jsxs)("div",{className:"d-flex justify-content-center mt-5",children:[Object(T.jsx)("h4",{children:f.length>=1}),Object(T.jsx)("div",{className:"form-outline mx-4",children:Object(T.jsx)("input",{type:"search",onChange:function(t){return O(t.target.value)},id:"form1",className:"form-control",placeholder:"Buscar"})}),Object(T.jsx)(J.a,{onChange:function(t){return l(t)},pageSize:20,total:null===m||void 0===m?void 0:m.total})]}),Object(T.jsx)("div",{className:"row",children:a.map((function(t){return Object(T.jsx)("div",{className:"col-md-4 my-5",children:Object(T.jsxs)("div",{className:"card",style:{height:"380px"},children:[Object(T.jsx)("img",{className:"card-img-top",src:t.image,alt:t.name}),Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("h5",{className:"card-title",children:t.name}),Object(T.jsxs)("p",{children:["Price: ",t.price]}),Object(T.jsx)("button",{onClick:function(){return g({type:d,payload:t})},className:"btn btn-warning btn-sm",children:"ADD TO CART"})]})]})},t.id)}))})]})},G=function(){var t=Object(r.b)(),e=Object(r.c)((function(t){return t.cart}));return Object(T.jsx)("div",{className:"container",children:Object(T.jsxs)("div",{className:"text-center",children:[Object(T.jsxs)("h3",{className:"mt-2",children:["Cantidad ",e.length]}),Object(T.jsx)("h2",{className:"mt-3",children:"Products in Cart"}),Object(T.jsx)("div",{className:"row",children:e.map((function(e){return Object(T.jsx)("div",{className:"col-md-3 my-3 text-center",children:Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)("img",{src:e.image,className:"card-img-top",alt:""}),Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("h5",{className:"card-title",children:e.name}),Object(T.jsxs)("p",{children:["Price: ",e.price]})]}),Object(T.jsxs)("p",{children:["cantidad: ",e.quantity]}),Object(T.jsxs)("p",{children:["total a pagar: $",e.total]}),Object(T.jsx)("button",{onClick:function(){return t({type:u,payload:e})},className:"btn btn-warning m-3",children:"delete"})]})},e.id)}))})]})})},z=Object(I.g)((function(t){var e=Object(r.b)(),a=Object(r.c)((function(t){return t.user.activo}));return Object(c.useEffect)((function(){a?t.history.push("/products"):t.history.push("/login")}),[a,t.history]),Object(T.jsxs)("div",{className:"text-center",children:[Object(T.jsx)("h1",{className:"my-3",children:"Igresar con:"}),Object(T.jsx)("button",{className:"btn btn-danger",onClick:function(){e((function(t){_.a.auth().signInWithPopup(P).then((function(e){var a=e.user;t(R(a.uid,a.displayName,a.photoURL,a.email))})).catch((function(t){console.log(t)}))}))},children:"Google"})]})})),B=function(){var t=Object(r.c)((function(t){return t.user}));return Object(T.jsxs)("div",{className:"text-center my-5",children:[Object(T.jsx)("h1",{children:t.userData.userName}),Object(T.jsx)("div",{className:"card-header",children:Object(T.jsx)("img",{src:t.userData.image,style:{borderRadius:"50%"},alt:"photo_Profile"})}),Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("h5",{className:"card-title",children:"Perfil de usuario"}),Object(T.jsx)("p",{className:"card-text",children:t.userData.email})]})]})},M=function(){var t=Object(r.b)(),e=Object(c.useState)(!0),a=Object(C.a)(e,2),n=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(C.a)(i,2),d=o[0],u=o[1];Object(c.useEffect)((function(){var e;t({type:j,payload:e}),_.a.auth().onAuthStateChanged((function(e){(null===e||void 0===e?void 0:e.uid)?(t(R(e.uid,e.displayName,e.photoURL,e.email)),u(!0)):u(null),s(!1)}))}),[t,n,d]);var b=Object(r.c)((function(t){return t.user.activo})),O=function(t){var e=t.component,a=t.path,c=Object(S.a)(t,["component","path"]);return b?Object(T.jsx)(I.b,Object(l.a)({component:e,path:a},c)):Object(T.jsx)(I.a,Object(l.a)({to:"/login"},c))};return!1!==d?Object(T.jsx)(w.a,{children:Object(T.jsxs)("div",{children:[Object(T.jsx)(q,{}),Object(T.jsxs)(I.d,{children:[Object(T.jsx)(I.b,{component:z,path:"/login",exact:!0}),Object(T.jsx)(I.b,{component:z,path:"/cartShopping",exact:!0}),Object(T.jsx)(O,{component:B,path:"/",exact:!0}),Object(T.jsx)(O,{component:L,path:"/products",exact:!0}),Object(T.jsx)(O,{component:G,path:"/cart",exact:!0})]})]})}):Object(T.jsx)("div",{children:"Cargando..."})};N.a.render(Object(T.jsx)(r.a,{store:v,children:Object(T.jsx)(n.a.StrictMode,{children:Object(T.jsx)(M,{})})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.3ba099ef.chunk.js.map